<!DOCTYPE html>
<html style="height: 100%">
<head>
    <meta charset="utf-8">
    <title>ä¸­å›½è‡ªç„¶ä¿æŠ¤åŒºæ—¶ç©ºåˆ†å¸ƒå›¾(å¤§åœ°ç¥ç€ç‰ˆ)</title>
    <script src="https://cdn.bootcdn.net/ajax/libs/echarts/5.4.3/echarts.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <style>
        /* é£æ ¼å¤§å˜ï¼šä½¿ç”¨æš–è‰²è°ƒ/äºšéº»è‰²èƒŒæ™¯ */
        .chart-footer {
            padding: 12px 30px;
            font-size: 13px;
            color: #5d4037; /* æ·±è¤è‰²æ–‡å­— */
            background-color: #fff8e1; /* ææ·¡çš„ç±³é»„è‰²èƒŒæ™¯ */
            border-top: 1px solid #ffe0b2; /* æµ…æ©™è‰²è¾¹æ¡† */
            font-family: "Microsoft YaHei", sans-serif;
            flex-shrink: 0;
            line-height: 1.6;
        }
        .footer-label {
            font-weight: bold;
            color: #bf360c; /* ç„¦ç³–è‰²æ ‡é¢˜ */
        }
    </style>
</head>
<body style="height: 100%; margin: 0; display: flex; flex-direction: column; overflow: hidden;">
    
    <div id="container" style="flex: 1; min-height: 0;"></div>
    
    <div id="loading" style="position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); color:#999; font-family: sans-serif;">
        æ­£åœ¨åŠ è½½åœ°å›¾æ•°æ®...
    </div>

    <div class="chart-footer">
        <div><span class="footer-label">æ³¨ï¼š</span>åœ°å›¾å±•ç¤ºå„çœè‡ªç„¶ä¿æŠ¤åŒºâ€œå®¶åº•â€ï¼›æŠ˜çº¿å›¾åæ˜ å›½å®¶çº§ä¿æŠ¤åŒºè¿‘å¹´çš„æ•´åˆä¼˜åŒ–è¶‹åŠ¿ã€‚</div>
        <div style="margin-top: 5px;"><span class="footer-label">æ•°æ®æ¥æºï¼š</span>å›½å®¶ç»Ÿè®¡å±€ (2023å¹´å¹´åº¦æ•°æ®)</div>
    </div>

    <script type="text/javascript">
        document.oncontextmenu = function() { return false; };
        var dom = document.getElementById("container");
        var myChart = echarts.init(dom);
        var option;

        myChart.showLoading();

        $.get('china.json', function (geoJson) {
            
            myChart.hideLoading();
            document.getElementById('loading').style.display = 'none';
            echarts.registerMap('china', geoJson);

            option = {
                backgroundColor: 'transparent',

                // ã€1. æ ‡é¢˜é…è‰²ï¼šæ·±è¤è‰² + ç„¦ç³–è‰²ã€‘
                title: [
                    {
                        text: '2023å¹´ä¸­å›½å„çœè‡ªç„¶ä¿æŠ¤åŒºæ•°é‡åˆ†å¸ƒ',
                        subtext: 'å•ä½ï¼šä¸ª',
                        left: 'center', top: 20,
                        textStyle: { color: '#3e2723', fontSize: 24, fontWeight: 'bold' },
                        subtextStyle: { fontSize: 13, color: '#6d4c41' }
                    },
                    {
                        text: 'ğŸ‚ å›½å®¶çº§è‡ªç„¶ä¿æŠ¤åŒºè¶‹åŠ¿',
                        subtext: 'å•ä½ï¼šä¸ª',
                        left: '2%', top: '10%',
                        textStyle: { fontSize: 16, fontWeight: 'bold', color: '#bf360c' }, // ç„¦ç³–è‰²
                        subtextStyle: { fontSize: 12, color: '#5d4037' }
                    }
                ],

                tooltip: {
                    trigger: 'item',
                    backgroundColor: 'rgba(255,255,255,0.95)',
                    borderColor: '#bf360c', borderWidth: 1, // æ©™è‰²è¾¹æ¡†
                    textStyle: { color: '#3e2723' },
                    formatter: function (params) {
                        var marker = '<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:#bf360c;"></span>';
                        if (params.seriesType === 'map') {
                            if (isNaN(params.value)) return params.name + '<br/><span style="color:#999">æ•°æ®æš‚ç¼º</span>';
                            return params.name + '<br/>' + marker + 'æ•°é‡: <b>' + params.value + '</b> ä¸ª';
                        } else {
                            return params.name + '<br/>' + marker + 'å›½å®¶çº§: <b>' + params.value + '</b> ä¸ª';
                        }
                    }
                },

                // ã€2. è§†è§‰æ˜ å°„ï¼šå¤§åœ°è‰²ç³» (ç±³é»„ -> æ©™ -> æ·±è¤)ã€‘
                visualMap: {
                    type: 'piecewise',
                    left: 30, bottom: 30,
                    itemWidth: 20, itemHeight: 14,
                    textGap: 10,
                    textStyle: { color: '#3e2723' },
                    seriesIndex: [0],
                    pieces: [
                        {min: 150, label: '> 150 (æå¤š)', color: '#bf360c'}, // æ·±ç„¦ç³–è‰²
                        {min: 100, max: 150, label: '100 - 150', color: '#d84315'}, // ç –çº¢
                        {min: 50, max: 100, label: '50 - 100', color: '#f57f17'},   // ç¥ç€é»„
                        {min: 20, max: 50, label: '20 - 50', color: '#ffb300'},    // æš–é»„
                        {max: 20, label: '< 20 (è¾ƒå°‘)', color: '#ffe082'}        // æµ…ç±³é»„
                    ]
                },

                graphic: [
                    {
                        type: 'group', right: 40, top: 80,
                        children: [
                            { type: 'circle', position: [0, 0], shape: { cx: 0, cy: 0, r: 25 }, style: { fill: '#fff', stroke: '#d7ccc8', lineWidth: 1, shadowBlur: 5, shadowColor: 'rgba(0,0,0,0.1)' } },
                            { type: 'polygon', shape: { points: [[0, -20], [-6, 0], [6, 0]] }, style: { fill: '#bf360c' } }, // åŒ—é’ˆç”¨æ·±æ©™è‰²
                            { type: 'polygon', shape: { points: [[0, 20], [-6, 0], [6, 0]] }, style: { fill: '#d7ccc8' } },
                            { type: 'text', position: [0, -32], style: { text: 'N', font: 'bold 14px sans-serif', fill: '#5d4037', textAlign: 'center' } }
                        ]
                    },
                    {
                        type: 'group', right: 40, bottom: 30,
                        children: [
                            { type: 'text', position: [0, -20], style: { text: '0      250     500 km', font: '12px sans-serif', fill: '#5d4037' } },
                            { type: 'rect', shape: { x: 0, y: 0, width: 40, height: 6 }, style: { fill: '#5d4037' } },
                            { type: 'rect', shape: { x: 40, y: 0, width: 40, height: 6 }, style: { fill: '#fff', stroke: '#5d4037', lineWidth:1 } },
                            { type: 'rect', shape: { x: 80, y: 0, width: 40, height: 6 }, style: { fill: '#5d4037' } },
                            { type: 'rect', shape: { x: 120, y:0, width: 6, height: 6 }, style: { fill: '#5d4037' } }
                        ]
                    }
                ],

                grid: {
                    left: '2%', top: '18%', 
                    width: '22%', height: '20%',
                    containLabel: true
                },
                xAxis: { 
                    type: 'category',
                    data: ['2019å¹´', '2020å¹´', '2021å¹´', '2023å¹´', '2024å¹´'],
                    axisLine: { lineStyle: { color: '#8d6e63' } },
                    axisLabel: { fontSize: 10, rotate: 30, color: '#5d4037' }
                },
                yAxis: { 
                    type: 'value',
                    splitLine: { show: false },
                    axisLabel: { fontSize: 10, color: '#5d4037' },
                    axisLine: { show: true, lineStyle: { color: '#8d6e63' } },
                    min: 400
                },

                series: [
                    // ã€ç³»åˆ—0ï¼šåœ°å›¾ã€‘
                    {
                        name: 'ä¿æŠ¤åŒºæ•°é‡',
                        type: 'map',
                        map: 'china',
                        roam: true,
                        scaleLimit: { min: 0.8, max: 3 },
                        zoom: 1.2,
                        center: [104.114129, 37.550339],
                        label: { show: false },
                        itemStyle: {
                            // é»˜è®¤åŒºåŸŸé¢œè‰²ï¼šææµ…çš„æš–ç°
                            normal: { borderColor: '#a1887f', borderWidth: 0.5, areaColor: '#efebe9' },
                            // æ‚¬åœé«˜äº®ï¼šæ˜äº®çš„ç¥ç€è‰²
                            emphasis: { areaColor: '#ffca28', shadowBlur: 10, borderWidth: 1.5, borderColor: '#fff' }
                        },
                        data: [
                            {name: 'åŒ—äº¬å¸‚', value: 20}, {name: 'å¤©æ´¥å¸‚', value: 8},
                            {name: 'æ²³åŒ—çœ', value: 45}, {name: 'å±±è¥¿çœ', value: 46},
                            {name: 'å†…è’™å¤è‡ªæ²»åŒº', value: 182}, {name: 'è¾½å®çœ', value: 99},
                            {name: 'å‰æ—çœ', value: 51}, {name: 'é»‘é¾™æ±Ÿçœ', value: 160},
                            {name: 'ä¸Šæµ·å¸‚', value: 6}, {name: 'æ±Ÿè‹çœ', value: 31},
                            {name: 'æµ™æ±Ÿçœ', value: 66}, {name: 'å®‰å¾½çœ', value: 109},
                            {name: 'ç¦å»ºçœ', value: 92}, {name: 'æ±Ÿè¥¿çœ', value: 180},
                            {name: 'å±±ä¸œçœ', value: 65}, {name: 'æ²³å—çœ', value: 30},
                            {name: 'æ¹–åŒ—çœ', value: 66}, {name: 'æ¹–å—çœ', value: 118},
                            {name: 'å¹¿ä¸œçœ', value: 88}, {name: 'å¹¿è¥¿å£®æ—è‡ªæ²»åŒº', value: 78},
                            {name: 'æµ·å—çœ', value: 37}, {name: 'é‡åº†å¸‚', value: 58},
                            {name: 'å››å·çœ', value: 133}, {name: 'è´µå·çœ', value: 82},
                            {name: 'äº‘å—çœ', value: 166}, {name: 'è¥¿è—è‡ªæ²»åŒº', value: 47},
                            {name: 'é™•è¥¿çœ', value: 61}, {name: 'ç”˜è‚ƒçœ', value: 56},
                            {name: 'é’æµ·çœ', value: 11}, {name: 'å®å¤å›æ—è‡ªæ²»åŒº', value: 13},
                            {name: 'æ–°ç–†ç»´å¾å°”è‡ªæ²»åŒº', value: 33},
                            {name: 'å°æ¹¾çœ', value: NaN}, {name: 'é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒº', value: NaN}, {name: 'æ¾³é—¨ç‰¹åˆ«è¡Œæ”¿åŒº', value: NaN}
                        ]
                    },
                    // ã€ç³»åˆ—1ï¼šæŠ˜çº¿å›¾ - å¤é“œè‰²é£æ ¼ã€‘
                    {
                        name: 'å›½å®¶çº§ä¿æŠ¤åŒº',
                        type: 'line',
                        data: [474, 474, 474, 449, 448], 
                        smooth: true,
                        symbol: 'circle',
                        symbolSize: 8,
                        // çº¿æ¡ï¼šæ·±é“œè‰²
                        lineStyle: { width: 3, color: '#bf360c', shadowColor: 'rgba(191, 54, 12, 0.4)', shadowBlur: 5 },
                        itemStyle: { color: '#bf360c', borderColor: '#fff', borderWidth: 2 },
                        areaStyle: {
                            // æš–æ©™è‰²æ¸å˜
                            color: new echarts.graphic.LinearGradient(0, 0, 0, 1, [
                                {offset: 0, color: 'rgba(191, 54, 12, 0.4)'},
                                {offset: 1, color: 'rgba(191, 54, 12, 0.05)'}
                            ])
                        },
                        label: { show: true, position: 'top', color: '#bf360c', fontSize: 11, fontWeight: 'bold' },
                        z: 10
                    }
                ]
            };

            myChart.setOption(option);
        });

        window.addEventListener('resize', myChart.resize);
    </script>
</body>
</html>