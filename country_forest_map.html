<!DOCTYPE html>
<html style="height: 100%">
<head>
    <meta charset="utf-8">
    <title>ä¸­å›½æ£®æ—è¦†ç›–ç‡ç»¼åˆåˆ†å¸ƒå›¾</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <style>
        .chart-footer {
            padding: 12px 30px;
            font-size: 13px;
            color: #555;
            background-color: #f9fcf9;
            border-top: 1px solid #e0e6e0;
            font-family: "Microsoft YaHei", sans-serif;
            flex-shrink: 0;
            line-height: 1.6;
        }
        .footer-label {
            font-weight: bold;
            color: #238b45;
        }
    </style>
</head>
<body style="height: 100%; margin: 0; display: flex; flex-direction: column; overflow: hidden;">
    
    <div id="container" style="flex: 1; min-height: 0;"></div>
    <div id="loading" style="position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); color:#999; font-family: sans-serif;">
        æ­£åœ¨åŠ è½½åœ°å›¾æ•°æ®...
    </div>

    <div class="chart-footer">
        <div><span class="footer-label">æ³¨ï¼š</span>ç¦å»ºçœæ£®æ—è¦†ç›–ç‡(66.8%)è¿ç»­45å¹´ä½å±…å…¨å›½é¦–ä½ï¼›æ±Ÿè¥¿ã€å¹¿è¥¿åˆ†åˆ—äºŒã€ä¸‰ä½ã€‚</div>
        <div style="margin-top: 5px;"><span class="footer-label">æ•°æ®æ¥æºï¼š</span>å›½å®¶ç»Ÿè®¡å±€ / 2023å¹´ç›¸å…³å…¬æŠ¥</div>
    </div>

    <script type="text/javascript">
        document.oncontextmenu = function() { return false; };
        var dom = document.getElementById("container");
        var myChart = echarts.init(dom);
        var option;

        myChart.showLoading();

        $.get('china.json', function (geoJson) {
            
            myChart.hideLoading();
            document.getElementById('loading').style.display = 'none';
            echarts.registerMap('china', geoJson);

            option = {
                backgroundColor: 'transparent',

                // ã€1. åŒæ ‡é¢˜ã€‘
                title: [
                    {
                        text: '2023å¹´ä¸­å›½å„çœä»½æ£®æ—è¦†ç›–ç‡',
                        subtext: 'æ•°æ®æ¥æºï¼šå›½å®¶ç»Ÿè®¡å±€      åœ°å›¾åœ°å›¾ï¼šé˜¿é‡Œäº‘DataV GeoAtlas',
                        left: 'center', top: 20,
                        textStyle: { color: '#333', fontSize: 24, fontWeight: 'bold' }
                    },
                    {
                        text: 'ğŸŒ² æ£®æ—è¦†ç›–ç‡ Top 5',
                        subtext: 'å•ä½ï¼š%',
                        left: '2%', top: '10%',
                        textStyle: { fontSize: 16, fontWeight: 'bold', color: '#238b45' },
                        subtextStyle: { fontSize: 12 }
                    }
                ],

                // ã€2. æ™ºèƒ½æç¤ºã€‘
                tooltip: {
                    trigger: 'item',
                    backgroundColor: 'rgba(255,255,255,0.95)',
                    borderColor: '#238b45', borderWidth: 1,
                    textStyle: { color: '#333' },
                    formatter: function (params) {
                        if (params.seriesType === 'map') {
                            if (isNaN(params.value)) return params.name + '<br/><span style="color:#999">æ•°æ®æš‚ç¼º</span>';
                            return params.name + '<br/>æ£®æ—è¦†ç›–ç‡: <b>' + params.value + '%</b>';
                        } else {
                            return 'Top ' + (5 - params.dataIndex) + ': ' + params.name + '<br/>è¦†ç›–ç‡: <b>' + params.value + '%</b>';
                        }
                    }
                },

                // ã€3. å°å›¾è¡¨åæ ‡ç³»ã€‘
                grid: {
                    left: '2%', top: '18%', 
                    width: '18%', height: '25%', // æ§åˆ¶å°å›¾è¡¨å¤§å°
                    containLabel: true
                },
                xAxis: { 
                    type: 'value', 
                    show: false, // éšè—Xè½´
                    splitLine: { show: false }
                },
                yAxis: { 
                    type: 'category', 
                    // æ•°æ®æ˜¯å€’åºçš„ï¼Œä¸ºäº†è®©æœ€å¤§çš„åœ¨æœ€ä¸Šé¢
                    data: ['æµ·å—çœ', 'æµ™æ±Ÿçœ', 'å¹¿è¥¿', 'æ±Ÿè¥¿çœ', 'ç¦å»ºçœ'], 
                    axisLine: { show: false },
                    axisTick: { show: false },
                    axisLabel: { color: '#333', fontWeight: 'bold', interval: 0, fontSize: 11 }
                },

                visualMap: {
                    type: 'piecewise',
                    left: 30, bottom: 30,
                    itemWidth: 20, itemHeight: 14,
                    textGap: 10,
                    textStyle: { color: '#333' },
                    seriesIndex: [0], // åªæ§åˆ¶åœ°å›¾
                    pieces: [
                        {min: 60, label: '> 60% (é«˜è¦†ç›–)', color: '#005a32'},
                        {min: 40, max: 60, label: '40% - 60%', color: '#238b45'},
                        {min: 20, max: 40, label: '20% - 40%', color: '#74c476'},
                        {min: 10, max: 20, label: '10% - 20%', color: '#a1d99b'},
                        {max: 10, label: '< 10% (ä½è¦†ç›–)', color: '#e5f5e0'}
                    ]
                },

                graphic: [
                    {
                        type: 'group', right: 40, top: 80,
                        children: [
                            { type: 'circle', position: [0, 0], shape: { cx: 0, cy: 0, r: 25 }, style: { fill: '#fff', stroke: '#999', lineWidth: 1, shadowBlur: 5, shadowColor: 'rgba(0,0,0,0.2)' } },
                            { type: 'polygon', shape: { points: [[0, -20], [-6, 0], [6, 0]] }, style: { fill: '#ff4d4f' } },
                            { type: 'polygon', shape: { points: [[0, 20], [-6, 0], [6, 0]] }, style: { fill: '#ccc' } },
                            { type: 'text', position: [0, -32], style: { text: 'N', font: 'bold 14px sans-serif', fill: '#333', textAlign: 'center' } }
                        ]
                    },
                    {
                        type: 'text', left: 30, bottom: 160, 
                        style: { text: 'å›¾ä¾‹', font: 'bold 16px Microsoft YaHei', fill: '#333' }
                    },
                    {
                        type: 'group', right: 40, bottom: 30,
                        children: [
                            { type: 'text', position: [0, -20], style: { text: '0      250     500 km', font: '12px sans-serif', fill: '#333' } },
                            { type: 'rect', shape: { x: 0, y: 0, width: 40, height: 6 }, style: { fill: '#333' } },
                            { type: 'rect', shape: { x: 40, y: 0, width: 40, height: 6 }, style: { fill: '#fff', stroke: '#333', lineWidth:1 } },
                            { type: 'rect', shape: { x: 80, y: 0, width: 40, height: 6 }, style: { fill: '#333' } },
                            { type: 'rect', shape: { x: 120, y:0, width: 6, height: 6 }, style: { fill: '#333' } }
                        ]
                    }
                ],

                series: [
                    // ã€ç³»åˆ—0ï¼šåœ°å›¾ã€‘
                    {
                        name: 'æ£®æ—è¦†ç›–ç‡',
                        type: 'map',
                        map: 'china',
                        roam: true,
                        scaleLimit: { min: 0.8, max: 3 },
                        zoom: 1.2,
                        center: [104.114129, 37.550339],
                        label: { show: false },
                        itemStyle: {
                            normal: { borderColor: '#797979', borderWidth: 0.5, areaColor: '#f0f0f0' },
                            emphasis: { areaColor: '#ffff00', shadowBlur: 10, borderWidth: 1.5, borderColor: '#fff' }
                        },
                        data: [
                            {name: 'ç¦å»ºçœ', value: 66.8}, {name: 'æ±Ÿè¥¿çœ', value: 61.2},
                            {name: 'å¹¿è¥¿å£®æ—è‡ªæ²»åŒº', value: 60.2}, {name: 'æµ™æ±Ÿçœ', value: 59.4},
                            {name: 'æ¹–å—çœ', value: 49.7}, {name: 'å¹¿ä¸œçœ', value: 53.5},
                            {name: 'æµ·å—çœ', value: 57.4}, {name: 'äº‘å—çœ', value: 55.0},
                            {name: 'å››å·çœ', value: 38.0}, {name: 'é»‘é¾™æ±Ÿçœ', value: 43.8},
                            {name: 'å‰æ—çœ', value: 41.5}, {name: 'è¾½å®çœ', value: 39.2},
                            {name: 'åŒ—äº¬å¸‚', value: 43.8}, {name: 'æ²³åŒ—çœ', value: 26.8},
                            {name: 'å±±è¥¿çœ', value: 20.5}, {name: 'å†…è’™å¤è‡ªæ²»åŒº', value: 22.1},
                            {name: 'ä¸Šæµ·å¸‚', value: 14.0}, {name: 'æ±Ÿè‹çœ', value: 15.2},
                            {name: 'å®‰å¾½çœ', value: 28.7}, {name: 'å±±ä¸œçœ', value: 17.5},
                            {name: 'æ²³å—çœ', value: 24.1}, {name: 'æ¹–åŒ—çœ', value: 39.6},
                            {name: 'é‡åº†å¸‚', value: 43.1}, {name: 'è´µå·çœ', value: 43.8},
                            {name: 'è¥¿è—è‡ªæ²»åŒº', value: 12.1}, {name: 'é™•è¥¿çœ', value: 43.1},
                            {name: 'ç”˜è‚ƒçœ', value: 11.3}, {name: 'é’æµ·çœ', value: 5.8},
                            {name: 'å®å¤å›æ—è‡ªæ²»åŒº', value: 12.6}, {name: 'æ–°ç–†ç»´å¾å°”è‡ªæ²»åŒº', value: 4.9},
                            {name: 'å¤©æ´¥å¸‚', value: 12.1},
                            {name: 'å°æ¹¾çœ', value: NaN},
                            {name: 'é¦™æ¸¯ç‰¹åˆ«è¡Œæ”¿åŒº', value: NaN},
                            {name: 'æ¾³é—¨ç‰¹åˆ«è¡Œæ”¿åŒº', value: NaN}
                        ]
                    },
                    // ã€ç³»åˆ—1ï¼šå·¦ä¸Šè§’æŸ±çŠ¶å›¾ Top 5ã€‘
                    {
                        name: 'Top 5',
                        type: 'bar',
                        // å¯¹åº” Y è½´çš„ [æµ·å—, æµ™æ±Ÿ, å¹¿è¥¿, æ±Ÿè¥¿, ç¦å»º]
                        data: [57.4, 59.4, 60.2, 61.2, 66.8], 
                        barWidth: 12,
                        label: { 
                            show: true, position: 'right', 
                            formatter: '{c}%',
                            fontSize: 11, fontWeight: 'bold', color: '#238b45'
                        },
                        itemStyle: {
                            color: new echarts.graphic.LinearGradient(1, 0, 0, 0, [
                                {offset: 0, color: '#238b45'},
                                {offset: 1, color: '#a1d99b'}
                            ]),
                            borderRadius: [0, 8, 8, 0]
                        },
                        z: 10
                    }
                ]
            };

            myChart.setOption(option);
        });

        window.addEventListener('resize', myChart.resize);
    </script>
</body>
</html>