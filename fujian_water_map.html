<!DOCTYPE html>
<html style="height: 100%">
<head>
    <meta charset="utf-8">
    <title>ç¦å»ºçœæ°´èµ„æºç»¼åˆæ¦‚è§ˆ</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <style>
        .chart-footer {
            padding: 12px 30px;
            font-size: 13px;
            color: #555;
            background-color: #f4f8fb;
            border-top: 1px solid #dbe9f3;
            font-family: "Microsoft YaHei", sans-serif;
            flex-shrink: 0;
            line-height: 1.6;
        }
        .footer-label {
            font-weight: bold;
            color: #0d47a1;
        }
    </style>
</head>
<body style="height: 100%; margin: 0; display: flex; flex-direction: column; overflow: hidden;">
    
    <div id="container" style="flex: 1; min-height: 0;"></div>
    <div id="loading" style="position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); color:#999; font-family: sans-serif;">
        æ­£åœ¨åŠ è½½åœ°å›¾æ•°æ®...
    </div>

    <div class="chart-footer">
        <div><span class="footer-label">æ³¨ï¼š</span>å…¨çœæ°´èµ„æºæ€»é‡åˆ†å¸ƒä¸å‡ï¼ˆå—å¹³æœ€å¤šï¼Œæ²¿æµ·æœ€å°‘ï¼‰ï¼›ç”¨æ°´ç»“æ„ä¸­ï¼Œå†œä¸šç”¨æ°´å æ¯”æœ€é«˜(58.1%)ï¼Œç”Ÿæ€ç”¨æ°´é€å¹´æå‡ã€‚</div>
        <div style="margin-top: 5px;"><span class="footer-label">æ•°æ®æ¥æºï¼š</span>ã€Š2023å¹´ç¦å»ºçœæ°´èµ„æºå…¬æŠ¥ã€‹</div>
    </div>

    <script type="text/javascript">
        document.oncontextmenu = function() { return false; };
        var dom = document.getElementById("container");
        var myChart = echarts.init(dom);
        var option;

        myChart.showLoading();

        $.get('fujian.json', function (geoJson) {
            
            myChart.hideLoading();
            document.getElementById('loading').style.display = 'none';
            echarts.registerMap('fujian', geoJson);

            option = {
                backgroundColor: 'transparent',

                title: [
                    { 
                        text: '2023å¹´ç¦å»ºçœå„è®¾åŒºå¸‚æ°´èµ„æºæ€»é‡',
                        left: 'center', 
                        top: 25, 
                        textStyle: { color: '#333', fontSize: 24, fontWeight: 'bold' }
                    },
                    { 
                        text: 'ğŸ’§ å…¨çœç”¨æ°´ç»“æ„',
                        subtext: 'æ€»ç”¨æ°´é‡å æ¯”(%)',
                        left: '2%', top: '8%',
                        textStyle: { fontSize: 15, fontWeight: 'bold', color: '#0d47a1' },
                        subtextStyle: { fontSize: 11 }
                    }
                ],

                tooltip: {
                    trigger: 'item',
                    backgroundColor: 'rgba(255,255,255,0.95)',
                    borderColor: '#2196f3', borderWidth: 1,
                    textStyle: { color: '#333' },
                    formatter: function (params) {
                        if (params.seriesType === 'map') {
                            if (isNaN(params.value)) return params.name + '<br/><span style="color:#999">æ•°æ®æš‚ç¼º</span>';
                            return params.name + '<br/>æ°´èµ„æºæ€»é‡: <b>' + params.value + '</b> äº¿mÂ³';
                        } else {
                            return params.name + '<br/>å æ¯”: <b>' + params.value + '%</b> (' + params.percent + '%)';
                        }
                    }
                },

                visualMap: {
                    type: 'piecewise',
                    left: 30, bottom: 30,
                    itemWidth: 20, itemHeight: 14,
                    textGap: 10,
                    textStyle: { color: '#333' },
                    seriesIndex: [0], 
                    pieces: [
                        {min: 200, label: '> 200 (æä¸°å¯Œ)', color: '#08306b'},
                        {min: 150, max: 200, label: '150 - 200', color: '#2171b5'},
                        {min: 100, max: 150, label: '100 - 150', color: '#6baed6'},
                        {min: 50, max: 100, label: '50 - 100', color: '#bdd7e7'},
                        {max: 50, label: '< 50 (åŒ®ä¹)', color: '#eff3ff'}
                    ]
                },

                graphic: [
                    {
                        type: 'group', right: 40, top: 80,
                        children: [
                            { type: 'circle', position: [0, 0], shape: { cx: 0, cy: 0, r: 25 }, style: { fill: '#fff', stroke: '#999', lineWidth: 1, shadowBlur: 5, shadowColor: 'rgba(0,0,0,0.2)' } },
                            { type: 'polygon', shape: { points: [[0, -20], [-6, 0], [6, 0]] }, style: { fill: '#2196f3' } },
                            { type: 'polygon', shape: { points: [[0, 20], [-6, 0], [6, 0]] }, style: { fill: '#ccc' } },
                            { type: 'text', position: [0, -32], style: { text: 'N', font: 'bold 14px sans-serif', fill: '#333', textAlign: 'center' } }
                        ]
                    },
                    {
                        type: 'group', right: 40, bottom: 30,
                        children: [
                            { type: 'text', position: [0, -20], style: { text: '0      50     100 km', font: '12px sans-serif', fill: '#333' } },
                            { type: 'rect', shape: { x: 0, y: 0, width: 40, height: 6 }, style: { fill: '#333' } },
                            { type: 'rect', shape: { x: 40, y: 0, width: 40, height: 6 }, style: { fill: '#fff', stroke: '#333', lineWidth:1 } },
                            { type: 'rect', shape: { x: 80, y: 0, width: 40, height: 6 }, style: { fill: '#333' } },
                            { type: 'rect', shape: { x: 120, y:0, width: 6, height: 6 }, style: { fill: '#333' } }
                        ]
                    }
                ],

                series: [
                    {
                        name: 'æ°´èµ„æºæ€»é‡',
                        type: 'map',
                        map: 'fujian',
                        roam: true,
                        scaleLimit: { min: 0.8, max: 3 },
                        zoom: 1.2,
                        center: [118.2, 26.3],
                        label: { show: true, color: '#000', fontSize: 11 },
                        itemStyle: {
                            normal: { borderColor: '#999', borderWidth: 0.5, areaColor: '#f0f0f0' },
                            emphasis: { areaColor: '#ffeb3b', shadowBlur: 10, borderWidth: 1.5, borderColor: '#fff' }
                        },
                        data: [
                            {name: 'å—å¹³å¸‚', value: 228.2}, {name: 'ä¸‰æ˜å¸‚', value: 168.4},
                            {name: 'é¾™å²©å¸‚', value: 135.5}, {name: 'å®å¾·å¸‚', value: 85.6},
                            {name: 'ç¦å·å¸‚', value: 83.8}, {name: 'æ¼³å·å¸‚', value: 78.5},
                            {name: 'æ³‰å·å¸‚', value: 72.1}, {name: 'è†ç”°å¸‚', value: 37.6},
                            {name: 'å¦é—¨å¸‚', value: 12.3}, {name: 'å¹³æ½­ç»¼åˆå®éªŒåŒº', value: 1.9}
                        ]
                    },
                    // ã€ç³»åˆ— 1ï¼šå·¦ä¸Šè§’é¥¼å›¾ - æ ¸å¿ƒä¼˜åŒ–åŒºã€‘
                    {
                        name: 'ç”¨æ°´ç»“æ„',
                        type: 'pie',
                        // ã€ä¼˜åŒ–1ã€‘ç¨å¾®ç¼©å°ä¸€ç‚¹åŠå¾„ï¼Œè…¾ç©ºé—´
                        radius: ['11%', '17%'], 
                        // ã€ä¼˜åŒ–2ã€‘ä¸­å¿ƒç‚¹ç¨å¾®å¾€ä¸‹ã€å¾€å³ç§»ï¼Œé¿å¼€æ ‡é¢˜å’Œå±å¹•è¾¹ç¼˜
                        center: ['13%', '26%'], 
                        avoidLabelOverlap: true, // ç¡®ä¿å¼€å¯é˜²é‡å 
                        data: [
                            {value: 58.1, name: 'å†œä¸š'},
                            {value: 14.2, name: 'å·¥ä¸š'},
                            {value: 17.8, name: 'ç”Ÿæ´»'},
                            {value: 9.8, name: 'ç”Ÿæ€'}
                        ],
                        label: {
                            show: true,
                            position: 'outside',
                            // ã€ä¼˜åŒ–3ã€‘æ”¹ä¸ºå•è¡Œæ˜¾ç¤ºï¼Œå‡å°‘å‚ç›´å ç”¨
                            formatter: '{b} {d}%',
                            // ã€ä¼˜åŒ–4ã€‘ç¼©å°å­—å·
                            fontSize: 10,
                            fontWeight: 'bold',
                            color: '#333'
                        },
                        // ã€ä¼˜åŒ–5ã€‘æè‡´ç¼©çŸ­å¼•å¯¼çº¿
                        labelLine: { length: 3, length2: 4 },
                        itemStyle: {
                            borderRadius: 2,
                            borderColor: '#fff',
                            borderWidth: 1
                        },
                        color: ['#66bb6a', '#42a5f5', '#ffa726', '#26c6da'],
                        z: 10
                    }
                ]
            };

            myChart.setOption(option);
        });

        window.addEventListener('resize', myChart.resize);
    </script>
</body>
</html>